/* Some issue use afte complte project */ /* HTML Section */

<section>
  <div class="booking-section">
    <!-- <div class="section-header">
          <h1>ðŸ§º Booking Services</h1>
          <p>Select your desired laundry services and book now</p>
        </div> -->

    <div class="booking-container">
      <!-- Left Section - Services -->
      <div class="left-section">
        <h2 class="section-title">Our Services</h2>
        <p>Click On The Add To Cart Button To Add The services To Your Cart</p>

        <div class="services-list" id="servicesList">
          <!-- Services will be dynamically generated -->
        </div>

        <div class="cart-info">
          ðŸ’¡ Add items to the cart to proceed with booking
        </div>
      </div>

      <!-- Right Section - Cart & Booking Form -->
      <div class="right-section">
        <h2 class="section-title">Added Items</h2>

        <!-- Cart Section -->
        <div class="cart-section">
          <div class="cart-items" id="cartItems">
            <div class="empty-cart">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="9" cy="21" r="1" stroke-width="2" />
                <circle cx="20" cy="21" r="1" stroke-width="2" />
                <path
                  d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <p>
                No items added yet.<br />Add services from the left to get
                started!
              </p>
            </div>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Total Amount:</span>
              <span class="total-amount">â‚¹<span id="totalAmount">0</span></span>
            </div>
          </div>
        </div>

        <!-- Booking Form -->
        <div class="booking-form">
          <!-- <h3 style="margin-bottom: 1rem; color: #333">Book Now</h3> -->
          <!-- <h3>Book Now</h3> -->

          <div class="form-group">
            <label for="fullName">Full Name *</label>
            <input
              type="text"
              id="fullName"
              placeholder="Enter your full name"
              required
            />
          </div>

          <div class="form-group">
            <label for="email">Email Address *</label>
            <input
              type="email"
              id="email"
              placeholder="Enter your email"
              required
            />
          </div>

          <div class="form-group">
            <label for="phone">Phone Number *</label>
            <input
              type="tel"
              id="phone"
              placeholder="Enter your phone number"
              required
            />
          </div>

          <button
            class="book-now-btn"
            onclick="bookNow()"
            id="bookBtn"
            disabled
          >
            Book Now
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

/* css file /*

<style>
  .booking-section {
    max-width: 1400px;
    margin: 0 auto;
    background: white;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    overflow: hidden;
  }
  .section-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    text-align: center;
  }
  .section-header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }
  .section-header p {
    font-size: 1.1rem;
    opacity: 0.9;
  }
  .booking-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    padding: 2rem;
  } /* Left Section -
Services */
  .left-section {
    margin-left: 50px;
    border-radius: 15px;
    background-color: aqua;
    border-right: 2px solid #e0e0e0;
    padding-right: 2rem; /*
height: 50vh; */
    width: 45vw;
  }
  .section-title {
    font-size: 1.8rem;
    color: #333;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    text-align: center;
  }
  .services-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .service-card {
    margin-left: 20px;
    height: 25vh;
    width: 40vw;
    background-color: yellow; /* background: #f8f9fa; */
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  .service-card:hover {
    border-color: #667eea;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
  }
  .service-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }
  .service-name {
    font-size: 1rem;
    font-weight: bold;
    color: #333;
  }
  .service-price {
    font-size: 1rem;
    font-weight: bold;
    color: #667eea;
  }
  .service-description {
    color: #666;
    font-size: 0.7rem;
    margin-bottom: 1rem;
  }
  .service-buttons {
    /* height: 7vh; */
    display: flex;
    gap: 0.5rem;
  }
  .add-btn,
  .remove-btn {
    flex: 1;
    padding: 0.7rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    font-size: 0.7rem;
  }
  .add-btn {
    background: #667eea;
    color: white;
  }
  .add-btn:hover {
    background: #5568d3;
    transform: scale(1.02);
  }
  .add-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: scale(1);
  }
  .remove-btn {
    width: 3vw;
    background: #ff6b6b;
    color: white;
    display: none;
  }
  .remove-btn:hover {
    background: #ff5252;
    transform: scale(1.02);
  }
  .remove-btn.active {
    display: block;
  }
  .cart-info {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1rem;
    border-radius: 10px;
    text-align: center;
    font-size: 1.1rem;
  } /* Right Section - Cart & Booking */
  .right-section {
    margin-left: 10px;
    border-radius: 15px;
    width: 40vw; /* height: 50vh; */
    padding-left: 2rem;
    background-color: green;
  }
  .cart-section {
    width: 35vw;
    background: #f8f9fa;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    /* min-height: 300px; */
  }
  .cart-items {
    margin-bottom: 1rem;
  }
  .cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: white;
    border-radius: 8px;
    margin-bottom: 0.5rem;
    animation: slideIn 0.3s ease;
  }
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  .cart-item-info {
    flex: 1;
  }
  .cart-item-name {
    font-weight: bold;
    color: #333;
    margin-bottom: 0.25rem;
  }
  .cart-item-price {
    color: #667eea;
    font-weight: bold;
  }
  .empty-cart {
    text-align: center;
    padding: 3rem 1rem;
    color: #999;
  }
  .empty-cart svg {
    width: 50px;
    height: 50px;
    margin-bottom: 1rem;
    opacity: 0.5;
  }
  .total-section {
    border-top: 2px solid #e0e0e0;
    padding-top: 1rem;
    margin-top: 1rem;
  }
  .total-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.5rem;
    font-weight: bold;
  }
  .total-label {
    color: #333;
  }
  .total-amount {
    color: #667eea;
  }
  .booking-form {
    width: 35vw;
    background: #f8f9fa;
    border-radius: 12px;
    padding: 1.5rem;
  }
  .form-group {
    margin-bottom: 1.2rem;
  }
  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #333;
  }
  .form-group input {
    width: 100%;
    padding: 0.9rem;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.3s ease;
  }
  .form-group input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  .book-now-btn {
    width: 100%;
    padding: 1.2rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 1rem;
  }
  .book-now-btn:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
  }
  .book-now-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
  }
</style>

<script>
  //  1. Creating an Empty Cart
  let cart = [];

  // 2. Adding Items to Cart Function
  // This function runs when someone clicks "Add" button. serviceId tells us which service they want.
  // Find the service box on the webpage that matches this ID.
  //   Create a package with 3 things:

  // The service ID number
  // The service name (like "Wash & Iron")
  // The service price (like 150)
  // Check if this service is already in the cart. If yes, stop here (don't add it again)
  // Put this service into the cart.
  // Refresh the cart display to show the new item.

  function addToCart(serviceId) {
    const serviceItem = $(`.service-item[data-id="${serviceId}"]`);
    const service = {
      id: serviceId,
      name: serviceItem.data("name"),
      price: serviceItem.data("price"),
    };

    if (cart.find((item) => item.id === serviceId)) {
      return;
    }

    cart.push(service);
    updateCart();
    updateButtons(serviceId, true);
  }

  // 3. Removing Items from Cart Function
  //  This function runs when someone clicks "Remove" button.
  // Keep all services EXCEPT the one being removed. Make a new cart without that item.
  // Refresh the cart display.
  // Change the "Remove" button back to "Add" button.

  function removeFromCart(serviceId) {
    cart = cart.filter((item) => item.id !== serviceId);
    updateCart();
    updateButtons(serviceId, false);
  }

  // 4. Updating the Cart Display Function
  // This function refreshes what you see in the cart.
  //  Find the cart table on the webpage.
  // Clear everything from the cart display (start fresh).
  // Check if the cart is empty (no items).
  //  If cart is empty, show message "No items added yet".
  // Go through each item in the cart one by one. index is the position number (0, 1, 2...).
  //   Create a table row showing:

  // Row number (index + 1 makes it 1, 2, 3... instead of 0, 1, 2...)
  // Service name
  // Price with â‚¹ symbol (toFixed(2) means show 2 decimal places like 150.00)
  // Add up all the prices. Start from 0, then add each item's price.( const total = cart.reduce)
  // Check if the "Book Now" button should be enabled or disabled

  function updateCart() {
    const cartBody = $("#cartItems");
    cartBody.empty();

    if (cart.length === 0) {
      cartBody.append(
        '<tr><td colspan="3" class="empty-cart">No items added yet</td></tr>'
      );
      $("#totalAmount").text("â‚¹0.00");
    } else {
      cart.forEach((item, index) => {
        const row = `
                <tr>
                    <td>${index + 1}</td>
                    <td>${item.name}</td>
                    <td style="text-align: right;">â‚¹${item.price.toFixed(
                      2
                    )}</td>
                </tr>
            `;
        cartBody.append(row);
      });

      const total = cart.reduce((sum, item) => sum + item.price, 0);
      $("#totalAmount").text(`â‚¹${total.toFixed(2)}`);
    }

    updateBookButton();
  }

  // 5. Updating Add/Remove Buttons Function
  // This function changes buttons. inCart is true if item is in cart, false if not.
  //  Find the "Add" button and "Remove" button for this service.
  // If item is in cart: Hide "Add" button, Show "Remove" button.

  function updateButtons(serviceId, inCart) {
    const serviceItem = $(`.service-item[data-id="${serviceId}"]`);
    const addBtn = serviceItem.find(".btn-add");
    const removeBtn = serviceItem.find(".btn-remove");

    if (inCart) {
      addBtn.hide();
      removeBtn.show();
    } else {
      removeBtn.hide();
      addBtn.show();
    }
  }

  // 6. Updating Book Button Function
  // This function checks if "Book Now" button should work.
  // Check if cart has any items (true if yes, false if no).
  //  If cart is empty, disable "Book Now" button. If cart has items, enable it.

  function updateBookButton() {
    const hasItems = cart.length > 0;
    $("#bookBtn").prop("disabled", !hasItems);
  }

  // 7. Book Now Button Click Handler
  //  Get the customer's name, email, and phone from the form. .trim() removes extra spaces.
  // If any field is empty, show an alert message and stop here.
  // Calculate the total price of all services.
  // Make a list of service names separated by commas (like "Wash & Iron, Dry Cleaning").
  // Create email subject line. encodeURIComponent makes it safe for email links.
  //  Add customer name, email, and phone to the email message.
  // For each service in cart, add a numbered line like "1. Wash & Iron - â‚¹150.00".
  // Clear the name, email, and phone input fields.
  // For each item in cart, change "Remove" button back to "Add" button.

  $("#bookBtn").click(function () {
    const fullName = $("#fullName").val().trim();
    const email = $("#email").val().trim();
    const phone = $("#phone").val().trim();

    if (!fullName || !email || !phone) {
      alert("Please fill in all fields");
      return;
    }

    const total = cart.reduce((sum, item) => sum + item.price, 0);
    const services = cart.map((item) => item.name).join(", ");

    // Prepare email
    const recipientEmail = "your-business@example.com"; // Change this to your email
    const subject = encodeURIComponent("Laundry Service Booking - " + fullName);

    // Build email body with proper line breaks
    let emailBody = "NEW BOOKING REQUEST" + "%0D%0A";
    emailBody += "==================" + "%0D%0A%0D%0A";
    emailBody += "Customer Details:" + "%0D%0A";
    emailBody += "Name: " + encodeURIComponent(fullName) + "%0D%0A";
    emailBody += "Email: " + encodeURIComponent(email) + "%0D%0A";
    emailBody += "Phone: " + encodeURIComponent(phone) + "%0D%0A%0D%0A";
    emailBody += "Services Requested:" + "%0D%0A";
    emailBody += "-------------------" + "%0D%0A";

    cart.forEach((item, index) => {
      emailBody +=
        index +
        1 +
        ". " +
        encodeURIComponent(item.name) +
        " - â‚¹" +
        item.price.toFixed(2) +
        "%0D%0A";
    });

    emailBody += "%0D%0A";
    emailBody += "TOTAL AMOUNT: â‚¹" + total.toFixed(2) + "%0D%0A";

    // Open email client with mailto
    window.location.href =
      "mailto:" + recipientEmail + "?subject=" + subject + "&body=" + emailBody;

    // Show confirmation alert
    alert(
      `âœ… Booking Confirmed!\n\nName: ${fullName}\nEmail: ${email}\nPhone: ${phone}\n\nServices: ${services}\n\nTotal Amount: â‚¹${total.toFixed(
        2
      )}\n\nYour email client will open to send the booking details.\nThank you for choosing our laundry services!`
    );

    // Clear form and cart
    $("#fullName, #email, #phone").val("");
    cart.forEach((item) => updateButtons(item.id, false));
    cart = [];
    updateCart();
  });

  // short explain all code

  // let cart = [];
  // ```
  // - Stores selected services as an array of objects

  // ### **2. Adding Services (`addToCart`)**
  // - Retrieves service details from the HTML element using jQuery
  // - Creates a service object with `id`, `name`, and `price`
  // - Checks if service already exists in cart (prevents duplicates)
  // - Adds service to cart and updates the UI

  // ### **3. Removing Services (`removeFromCart`)**
  // - Filters out the service with matching ID
  // - Updates cart display and button states

  // ### **4. Cart Display (`updateCart`)**
  // - Clears and rebuilds the cart table
  // - Shows "No items added yet" if empty
  // - Otherwise, displays each service with:
  //   - Row number
  //   - Service name
  //   - Price (formatted with â‚¹ symbol)
  // - Calculates and displays total amount
  // - Enables/disables the book button based on cart contents

  // ### **5. Button State Management (`updateButtons`)**
  // - Toggles between "Add" and "Remove" buttons
  // - Shows "Remove" when service is in cart
  // - Shows "Add" when service is not in cart

  // ### **6. Booking Submission (`#bookBtn` click handler)**

  // **Validation:**
  // - Checks if all form fields (name, email, phone) are filled
  // - Prevents submission if cart is empty

  // **Email Generation:**
  // - Creates a formatted email using `mailto:` protocol
  // - URL-encodes all data to handle special characters
  // - Uses `%0D%0A` for line breaks in email body
  // - Includes:
  //   - Customer details
  //   - List of services with prices
  //   - Total amount

  // **Email Structure:**
  // ```
  // NEW BOOKING REQUEST
  // ==================

  // Customer Details:
  // Name: [Customer Name]
  // Email: [Customer Email]
  // Phone: [Customer Phone]

  // Services Requested:
  // -------------------
  // 1. [Service Name] - â‚¹[Price]
  // 2. [Service Name] - â‚¹[Price]

  // TOTAL AMOUNT: â‚¹[Total]
</script>
